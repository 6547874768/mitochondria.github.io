name: Update Clarity Project ID

on:
  workflow_dispatch: # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

jobs:
  update-clarity-id:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
    
    - name: Replace YOUR_PROJECT_ID with real Clarity ID
      run: |
        echo "üîß –ó–∞–º–µ–Ω—è–µ–º YOUR_PROJECT_ID –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π Clarity ID..."
        
        # –†–µ–∞–ª—å–Ω—ã–π Project ID –æ—Ç Microsoft Clarity
        REAL_PROJECT_ID="sdzy2un6sn"
        
        PROCESSED=0
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤—Å–µ HTML —Ñ–∞–π–ª—ã
        for file in *.html; do
          if [ -f "$file" ]; then
            echo "üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º: $file"
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ YOUR_PROJECT_ID
            if grep -q "YOUR_PROJECT_ID" "$file"; then
              # –ó–∞–º–µ–Ω—è–µ–º YOUR_PROJECT_ID –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID
              sed -i "s/YOUR_PROJECT_ID/$REAL_PROJECT_ID/g" "$file"
              echo "   ‚úÖ Project ID –æ–±–Ω–æ–≤–ª–µ–Ω: $REAL_PROJECT_ID"
              PROCESSED=$((PROCESSED + 1))
            elif grep -q "sdzy2un6sn" "$file"; then
              echo "   ‚úÖ –†–µ–∞–ª—å–Ω—ã–π Project ID —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
            else
              echo "   ‚ö†Ô∏è  Microsoft Clarity –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ñ–∞–π–ª–µ"
            fi
          fi
        done
        
        echo ""
        echo "üìä –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: $PROCESSED"
        echo "üéØ Microsoft Clarity Project ID –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!"
    
    - name: Verify Clarity Project ID
      run: |
        echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å Project ID..."
        echo ""
        
        TOTAL_FILES=0
        CLARITY_ACTIVE=0
        
        for file in *.html; do
          if [ -f "$file" ]; then
            TOTAL_FILES=$((TOTAL_FILES + 1))
            echo "üìÑ $file:"
            
            if grep -q "Microsoft Clarity" "$file"; then
              if grep -q "sdzy2un6sn" "$file"; then
                echo "   ‚úÖ Microsoft Clarity –∞–∫—Ç–∏–≤–µ–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º ID"
                CLARITY_ACTIVE=$((CLARITY_ACTIVE + 1))
              elif grep -q "YOUR_PROJECT_ID" "$file"; then
                echo "   ‚ö†Ô∏è  –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–º–µ–Ω–∞ YOUR_PROJECT_ID"
              else
                echo "   ‚ùì Microsoft Clarity –Ω–∞–π–¥–µ–Ω, –Ω–æ ID –Ω–µ—è—Å–µ–Ω"
              fi
            else
              echo "   ‚ùå Microsoft Clarity –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
            fi
            echo ""
          fi
        done
        
        echo "üìä –ò—Ç–æ–≥–æ: $CLARITY_ACTIVE –∏–∑ $TOTAL_FILES —Ñ–∞–π–ª–æ–≤ —Å –∞–∫—Ç–∏–≤–Ω—ã–º Clarity"
        
        if [ $CLARITY_ACTIVE -eq $TOTAL_FILES ]; then
          echo "üéâ Microsoft Clarity –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!"
          echo "üìä –î–∞–Ω–Ω—ã–µ –Ω–∞—á–Ω—É—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 10-30 –º–∏–Ω—É—Ç"
        else
          echo "‚ö†Ô∏è  –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã —Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è"
        fi
    
    - name: Commit changes
      run: |
        git config user.name "GitHub Actions Bot"
        git config user.email "actions@github.com"
        
        if git diff --quiet; then
          echo "üîÑ –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞"
        else
          git add *.html
          git commit -m "üìä Activate Microsoft Clarity with Project ID

          - –ó–∞–º–µ–Ω–µ–Ω YOUR_PROJECT_ID –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID: sdzy2un6sn
          - Microsoft Clarity –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –Ω–∞ –≤—Å–µ—Ö 24 —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
          - –ó–∞–ø–∏—Å–∏ —Å–µ—Å—Å–∏–π –Ω–∞—á–Ω—É—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å —á–µ—Ä–µ–∑ 10-30 –º–∏–Ω—É—Ç
          - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Analytics –≥–æ—Ç–æ–≤–∞"
          
          git push
          echo "‚úÖ Microsoft Clarity –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!"
        fi
    
    - name: Final Summary
      run: |
        echo "üèÜ –ü–†–û–ï–ö–¢ –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í –ö –ü–†–û–î–ê–ö–®–ï–ù–£!"
        echo ""
        echo "‚úÖ –ó–ê–í–ï–†–®–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò:"
        echo "   üîí Security Headers: —Ä–µ–π—Ç–∏–Ω–≥ A"
        echo "   üìä Google Analytics GA4: –∞–∫—Ç–∏–≤–µ–Ω"
        echo "   üìà Microsoft Clarity: –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω (ID: sdzy2un6sn)"
        echo "   üéØ UTM-–º–µ—Ç–∫–∏: —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ GA4"
        echo "   üö´ 404 —Å—Ç—Ä–∞–Ω–∏—Ü–∞: —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ"
        echo "   ‚òÅÔ∏è  Cloudflare Proxy: –∞–∫—Ç–∏–≤–µ–Ω –∏ –∑–∞—â–∏—â–∞–µ—Ç"
        echo "   üõ°Ô∏è  Rate-limit –∑–∞—â–∏—Ç–∞: —Ä–∞–±–æ—Ç–∞–µ—Ç"
        echo "   üí∞ Affiliate tracking: —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö"
        echo "   üíæ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–µ–∫–∞–ø: –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 12:00 UTC"
        echo ""
        echo "üìä –ü–†–û–ì–†–ï–°–°: 9 –∏–∑ 9 –ø—É–Ω–∫—Ç–æ–≤ –≥–æ—Ç–æ–≤–æ (100%)"
        echo ""
        echo "üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:"
        echo "   1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ Microsoft Clarity —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç"
        echo "   2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ü–µ–ª–∏ –≤ Google Analytics"
        echo "   3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–µ–∫–ª–∞–º–Ω—É—é –∫–∞–º–ø–∞–Ω–∏—é"
        echo "   4. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ affiliate –∫–æ–Ω–≤–µ—Ä—Å–∏–∏"
        echo ""
        echo "üöÄ –ü–†–û–ï–ö–¢ –ó–ê–ü–£–©–ï–ù –í –ü–†–û–î–ê–ö–®–ï–ù!"
